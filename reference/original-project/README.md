# 🦙 RunPod Ollama ロールプレイチャット アプリケーション仕様書

## 📋 プロジェクト概要

### アプリケーション名
RunPod GPU ロールプレイチャット

### 概要
RunPod上のOllamaおよびvLLMを使用した高品質なAIロールプレイチャットアプリケーション。**完全実装済みのグループチャット機能**により2-4人のキャラクターとの同時会話が可能。ユーザーがキャラクターとシチュエーションを選択し、AIと没入感のある対話を楽しむことができる。**6ステップ直感的UIウィザード**（選択後自動進行）、**統合プロンプト管理システム**（GUI編集対応）、3択選択肢システム、**「心の声モード」**でキャラクターの内面心理表現、**「好感度システム」**によるリアルタイム関係性管理、**「キャラクター状態変更」**による8種類の感情制御、**テーマプロファイル機能**による完全カスタマイズ環境が特徴。**2024年12月最新版**では、エラーハンドリングの大幅改善とコード最適化により、より安定した動作を実現。**実装度98%以上**の高品質システム。

### 対象環境
- **AI推論**: RunPod GPU（Ollama 11434ポート、vLLV 8000ポート）**+ Gemini AI API** ⭐NEW
- **Webサーバー**: Node.js + Express（ローカル 3000ポート）
- **クライアント**: モダンブラウザ（Chrome, Firefox, Safari, Edge）
- **ストレージ**: ブラウザのLocalStorage

---

## 🏗️ システム構成

### ファイル構造
```
roleplay-chat/
├── index.html                    # メインHTMLファイル
├── server.js                     # Node.js Webサーバー
├── package.json                  # パッケージ設定
├── CLAUDE.md                     # Claude Code向けプロジェクト指示書
├── css/
│   ├── styles.css               # メインスタイル
│   ├── animations.css           # アニメーション専用CSS
│   └── responsive.css           # レスポンシブ対応CSS
├── js/
│   ├── app.js                   # メインアプリケーション（Ollama最適化）
│   ├── api-client.js           # RunPod GPU API通信管理
│   ├── character-manager.js     # キャラクター管理
│   ├── character-state-manager.js # キャラクター状態追跡
│   ├── situation-manager.js     # シチュエーション管理
│   ├── chat-manager.js         # チャット機能（Ollama/vLLM最適化）
│   ├── history-manager.js      # 履歴管理
│   ├── ui-manager.js          # UI操作管理（Ollama最適化）
│   ├── user-character-manager.js # ユーザーキャラクター・3択選択肢システム
│   ├── user-profile-manager.js  # テーマプロファイル管理システム ⭐NEW
│   ├── user-profile-ui.js       # テーマプロファイルUI管理 ⭐NEW
│   ├── inner-voice-mode.js    # 心の声モード機能 ⭐
│   ├── affection-manager.js   # 好感度管理システム ⭐
│   ├── avatar-manager.js      # 3Dアバターマネージャー ⭐NEW
│   ├── scenario-set-manager.js # シナリオセット管理システム ⭐NEW
│   ├── prompt-manager.js      # 統合プロンプト管理システム ⭐NEW
│   ├── prompt-ui-manager.js   # プロンプト編集UI管理 ⭐NEW
│   ├── group-chat-manager.js  # グループチャット管理 ⭐NEW
│   ├── group-dynamics-manager.js # グループダイナミクス管理 ⭐NEW
│   ├── multi-affection-manager.js # 複数好感度管理 ⭐NEW
│   ├── group-ui-manager.js    # グループUI管理 ⭐NEW
│   ├── character-status-manager.js # キャラクター状態管理 ⭐NEW
│   ├── prompts/               # プロンプト定義ファイル群 ⭐NEW
│   │   ├── chat-prompts.js    # チャット・ロールプレイ用プロンプト
│   │   ├── choice-prompts.js  # 3択選択肢生成用プロンプト
│   │   ├── affection-prompts.js # 好感度分析用プロンプト
│   │   ├── system-prompts.js  # システム・エラー処理用プロンプト
│   │   ├── group-chat-prompts.js # グループチャット用プロンプト ⭐NEW
│   │   └── group-dynamics-prompts.js # グループダイナミクス用プロンプト ⭐NEW
│   ├── group-dynamics-manager.js # グループダイナミクス管理 ⭐NEW
│   ├── multi-affection-manager.js # 複数好感度管理 ⭐NEW
│   ├── group-chat-manager.js   # グループチャット管理 ⭐NEW
│   ├── group-ui-manager.js     # グループUI管理 ⭐NEW
│   ├── character-status-manager.js # キャラクター状態管理システム ⭐NEW
│   └── utils.js               # ユーティリティ・基底クラス
├── data/
│   ├── characters.json         # デフォルトキャラクターデータ
│   ├── situations.json        # デフォルトシチュエーションデータ
│   ├── user-characters.json   # ユーザーキャラクターデータ
│   ├── user-profiles.json     # テーマプロファイルデータ ⭐NEW (※ファイル名は互換性のため変更予定)
│   ├── scenario-sets.json     # 共通シナリオセットデータ ⭐NEW
│   ├── group-scenarios.json   # 共通グループチャット専用シナリオ ⭐NEW
│   ├── custom_prompts.json    # カスタムプロンプト設定 ⭐NEW
│   └── profiles/              # テーマプロファイル別データディレクトリ ✅完全実装
│       └── profile_[ID]/      # 個別テーマプロファイルデータ（5+プロファイル実装済み）
│           ├── characters.json      # プロファイル専用キャラクター ✅
│           ├── situations.json      # プロファイル専用シチュエーション ✅
│           ├── user_characters.json # プロファイル専用ユーザーキャラクター ✅
│           ├── scenario-sets.json   # プロファイル専用シナリオセット ✅実装済み
│           └── group-scenarios.json # プロファイル専用グループシナリオ ✅実装済み
```

### 技術スタック
- **フロントエンド**: HTML5, CSS3, Vanilla JavaScript
- **バックエンド**: Node.js + Express
- **AI API**: RunPod Ollama/vLLM
- **スタイリング**: CSS Grid, Flexbox, グラデーション、アニメーション
- **ストレージ**: LocalStorage
- **通信**: Fetch API（ストリーミング対応）

---

## 🎭 主要機能

### 0. 🎭 グループチャット機能 ✅完全実装済み
複数のキャラクターと同時に会話できる革新的なマルチキャラクター ロールプレイシステム。**2-4人のキャラクターとリアルタイムでグループ会話**を楽しめます。**実装度95%以上の高品質システム**。

#### 🌟 核心機能
- **マルチキャラクター同時会話**: 2-4人のキャラクターが自然に会話に参加
- **AI主導発話制御**: マスターAIが適切なタイミングで各キャラクターの発話を管理
- **リアルタイム関係性分析**: キャラクター間の関係性を動的に分析・進展
- **プロファイル別グループシナリオ**: 共通8種類 + プロファイル専用シナリオの統合管理 ⭐NEW
- **複数好感度管理**: ユーザー⇔各キャラクター + キャラクター同士の好感度を同時管理
- **グループダイナミクス**: 発話バランス、グループ雰囲気、関係性ネットワークの可視化
- **キャラクター状態変更**: 各キャラクターの感情状態（上機嫌、不機嫌、興奮、恥ずかしがりなど）をリアルタイム制御 ⭐NEW
- **選択肢自動生成**: グループチャット専用の💭ボタンでユーザーキャラクターに基づく選択肢を生成 ⭐NEW
- **全画面専用UI**: 美しく使いやすい専用レイアウト、参加者パネル、統計表示、関係性マップ付き ⭐NEW

#### 🎪 グループシナリオ（8種類）
各シナリオは**初期プロンプト**、**グループダイナミクス**、**推奨キャラクター**を含む完全設計。

1. **学園の放課後パーティー** - 学園祭準備後の和やかなひととき（和やか・友情）
2. **雨の日のカフェ会議** - 落ち着いた雰囲気での深い話し合い（落ち着いた・知的）
3. **夜のお祭り探索** - 浴衣を着てお祭りを満喫（賑やか・夏祭り）
4. **謎解きチーム** - 協力して脱出ゲームに挑戦（緊張・協力）
5. **料理パーティー** - みんなでキッチンに立って料理作り（協力的・家庭的）
6. **星空観察会** - 満天の星空の下での深い語らい（静寂・ロマンチック）
7. **温泉旅行の夜** - 温泉後の浴衣姿でリラックス（リラックス・温泉）
8. **図書館での勉強会** - 静かな環境での学習と励まし合い（集中・学習）

#### 🎯 シナリオ選択システム
- **専用シナリオモード**: 8つの特別設計されたグループ会話シナリオ
- **プロファイル別管理**: 共通シナリオ + 各テーマプロファイル専用シナリオ ⭐NEW
- **視覚的識別**: 🌍 共通シナリオ、📁 プロファイル専用の分かりやすいバッジ表示 ⭐NEW
- **通常シチュエーションモード**: 既存のシチュエーションをグループ用に活用
- **タブ切り替え**: 直感的なUI でモード切り替え可能
- **詳細情報表示**: 各シナリオの場面、雰囲気、推奨キャラクター、時間・場所を表示

#### 📊 リアルタイム分析機能
- **発話バランス監視**: 全員が適度に参加できているかチェック
- **グループ雰囲気追跡**: happy、romantic、tense、peaceful等の雰囲気変化
- **関係性ネットワーク**: キャラクター間の関係性を視覚的に表示
- **好感度統計**: 個別・グループ・相互関係の3層好感度管理

#### 🎯 技術革新
- **マスターAI制御方式**: 1つのAIが全キャラクターを制御する効率的システム
- **プロファイル別シナリオ管理**: 共通＋専用シナリオの統合表示システム ⭐NEW
- **変数置換プロンプト**: `{{CHARACTER_NAME}}`等の動的プロンプト生成
- **イベント駆動アーキテクチャ**: リアルタイム更新とレスポンシブUI
- **段階的フォールバック**: エラー時の自動復旧システム

### 1. 統合プロンプト管理システム ✅完全実装済み
システム全体のプロンプトを一元管理し、保守性と拡張性を向上させるシステム。**管理画面でプロンプトの編集・修正が可能**。**実装度100%の完璧なシステム**。

#### 主要機能
- **一元管理**: 全プロンプトを`js/prompts/`ディレクトリで集中管理
- **変数置換**: `{{VARIABLE_NAME}}`形式による動的なプロンプト生成
- **カテゴリ別整理**: 用途別にプロンプトファイルを分類
- **フォールバック**: エラー時の自動復旧システム
- **LocalStorage連携**: カスタムプロンプトの保存・読み込み
- **GUI編集**: 管理画面でプロンプトの直接編集・リアルタイムプレビュー ⭐NEW
- **バックアップ**: プロンプト変更前の自動バックアップ機能 ⭐NEW

#### プロンプトカテゴリ ✅完全実装済み
- **chat-prompts.js**: ロールプレイ、心の声モード、好感度対応チャット用 ✅
- **choice-prompts.js**: 3択選択肢生成用（通常・感情的・シチュエーション別）✅
- **affection-prompts.js**: 好感度分析とレベル別応答調整用 ✅
- **system-prompts.js**: AI生成、エラー処理、デバッグ用 ✅
- **group-chat-prompts.js**: グループチャット専用プロンプト ✅実装済み
- **group-dynamics-prompts.js**: グループダイナミクス・関係性分析用 ✅実装済み

#### 変数システム
```javascript
// 使用例
"{{CHARACTER_NAME}}と{{SITUATION_NAME}}での対話を開始します"
// → "美咲と学校の屋上（夕日）での対話を開始します"
```

#### メンテナンス性向上
- **簡単な修正**: プロンプトファイルを編集するだけで全システムに反映
- **バージョン管理**: Git等でプロンプトの変更履歴を追跡可能
- **テスト容易性**: プロンプト単位での動作検証が可能

### 2. 🎭 キャラクター状態変更システム ✅実装済み
各キャラクターの感情状態（上機嫌、不機嫌、興奮、恥ずかしがりなど）をリアルタイムで制御し、会話の雰囲気を動的に変化させる革新的システム。**8種類の感情状態でキャラクターの表現力を大幅向上**。**実装度95%の高品質システム**。

#### 🌟 核心機能
- **8種類の感情状態**: 上機嫌、不機嫌、興奮、落ち込み、甘えたい、恥ずかしがり、大胆、ドキドキなど
- **排他制御**: 矛盾する感情状態の自動制御（上機嫌⇔不機嫌など）
- **好感度連動**: 状態に応じた好感度変化の倍率調整
- **プロンプト自動調整**: 選択した状態に基づく発話スタイルの自動変更
- **リアルタイム反映**: 状態変更が即座に会話に反映
- **LocalStorage保存**: キャラクター別状態の永続化
- **グループチャット対応**: 複数キャラクターの個別状態管理 ⭐NEW

#### 🎨 状態一覧
1. **😊 上機嫌**: テンション高め、ポジティブな反応（好感度倍率: 1.2倍）
2. **😤 不機嫌**: イライラ気味、素っ気ない対応（好感度倍率: 0.8倍）  
3. **🔥 興奮**: ハイテンション、早口（好感度倍率: 1.1倍）
4. **😔 落ち込み**: 元気がない、ネガティブ思考（好感度倍率: 0.9倍）
5. **🥺 甘えたい**: 依存的、可愛らしい（好感度倍率: 1.3倍）
6. **😳 恥ずかしがり**: 照れ、控えめ（好感度倍率: 1.1倍）
7. **😏 大胆**: 積極的、挑発的（好感度倍率: 1.0倍）
8. **💓 ドキドキ**: 恋愛モード、意識している（好感度倍率: 1.4倍）

### 3. 📊 キャラクター状態管理システム ✅完全実装済み  
全キャラクターの好感度、状態、統計情報を一元管理・可視化する革新的な分析システム。**すべてのキャラクターとの関係性を一目で把握**できます。**実装度95%の高品質システム**。

#### 🌟 核心機能
- **統合ダッシュボード**: 全キャラクターの状態を美しいカード形式で一覧表示
- **リアルタイム統計**: 平均好感度、総会話回数、最高好感度等の自動集計
- **好感度可視化**: カラフルな好感度バー（嫌悪→愛情の5段階）
- **詳細履歴表示**: 好感度変動の詳細履歴とトレンド分析
- **高度な検索・フィルター**: 名前検索、好感度レベル別フィルタリング
- **手動調整機能**: 好感度の手動調整・リセット機能
- **データエクスポート**: 全データのJSON形式エクスポート

#### 📈 分析機能
- **好感度トレンド**: 上昇/下降/安定の傾向自動分析
- **会話統計**: キャラクター別の会話回数・メッセージ数・最終会話日時
- **変動分析**: ポジティブ/ネガティブ変動回数と平均変動値
- **関係性ランキング**: 好感度順ソート表示

#### 🎨 UI/UX特徴
- **美しいデザイン**: グラデーション背景と半透明カード型レイアウト
- **直感的操作**: ワンクリック詳細表示、タップ操作対応
- **レスポンシブ対応**: PC・タブレット・スマートフォン完全対応
- **色分け表示**: 好感度レベル別の視覚的識別

#### 🛠️ 管理機能
- **個別詳細ビュー**: キャラクター個別の詳細情報モーダル表示
- **好感度調整**: ±5, ±10の段階的調整とワンクリックリセット
- **履歴管理**: 好感度変動の詳細履歴（最新10件表示）
- **統計情報**: 詳細な統計データと分析結果

### 3. キャラクター管理システム
- **キャラクター選択**: 事前定義されたキャラクターから選択
- **キャラクター作成**: 名前、説明、詳細プロンプトを設定
- **AI生成キャラクター**: RunPod Ollamaを使用した動的キャラクター生成
- **インポート/エクスポート**: JSON形式でのデータ管理
- **ランダム選択**: ランダムキャラクター選択機能

#### デフォルトキャラクター
1. **ツンデレな幼馴染** - 素直になれない幼馴染
2. **優しいお姉さん** - 包容力のある年上女性
3. **元気な後輩** - 明るく人懐っこい後輩
4. **美咲** - 学園のムードメーカー的存在で、明るく社交的な女の子 ⭐NEW
5. **澪** - 落ち着いていて知的、読書好きで思慮深い文学少女 ⭐NEW
6. **ひまり** - 天真爛漫で好奇心旺盛、みんなに愛される可愛い女の子 ⭐NEW

### 4. シチュエーション管理システム
- **シチュエーション選択**: 事前定義されたシーンから選択
- **シチュエーション作成**: 場所、時間、雰囲気の詳細設定
- **AI生成シチュエーション**: RunPod Ollamaを使用した動的シーン生成
- **インポート/エクスポート**: JSON形式でのデータ管理

#### デフォルトシチュエーション
1. **学校の屋上（夕日）** - 放課後の特別な時間
2. **おしゃれなカフェ（午後）** - 落ち着いた会話空間
3. **自宅でまったり（夜）** - リラックスした家庭環境
4. **放課後の教室（夕日）** - 学園祭準備後のお疲れ様パーティー ⭐NEW

### 5. 🌟 3択選択肢システム + テーマプロファイル機能 ⭐NEW
- **ユーザーキャラクター設定**: 自分の性格・話し方を定義
- **テーマプロファイル管理**: 複数のテーマ設定を作成・切り替え可能 ⭐NEW
- **プロファイル別設定**: テーマごとに好みの応答スタイル・性格設定を保存 ⭐NEW
- **自動選択肢生成**: AI がユーザーキャラクターに基づいて文脈に即した3つの会話選択肢を生成
- **自由入力**: 選択肢以外に自由入力も可能
- **リアルタイム更新**: AI応答後に自動で新しい選択肢を生成
- **心の声モード対応**: 心の声を含む選択肢も生成可能
- **テーマ連動**: 選択したテーマプロファイルに応じて選択肢の傾向が変化 ⭐NEW

#### テーマプロファイル例
- **「学園青春テーマ」**: 学校系キャラ＋教室・屋上シチュエーション＋学生の設定
- **「カフェデートテーマ」**: 大人キャラ＋おしゃれカフェシチュエーション＋社会人の設定
- **「ファンタジー冒険テーマ」**: 魔法使い系キャラ＋異世界シチュエーション＋冒険者の設定
- **「家族団らんテーマ」**: 家族キャラ＋家庭的シチュエーション＋親しみやすい設定
- **「お仕事テーマ」**: 職場キャラ＋オフィスシチュエーション＋プロフェッショナルの設定

### 6. 💭 心の声モード
- **ワンクリック切り替え**: チャット画面のボタンで簡単にON/OFF切り替え
- **内面心理描写**: キャラクターの心の声や内面の感情を表現
- **多層的な応答**: 発言・動作・心の声の3要素による豊かな表現
- **設定保存**: モード設定はブラウザに自動保存
- **選択肢対応**: 3択選択肢にも心の声モードが適用

#### 心の声モードの応答形式
```
「あら、あなたが噂の天才魔法使いさんね。私は桜。よろしく」（にこやかに微笑む）
（桜は優雅に立ち上がり、悠人に向かってお辞儀をする）
心の声：「すごい...こんな素敵な人に会えるなんて。早く仲良くなりたいわ」
```

### 7. 🎭 3Dアバターシステム ✅実装済み

キャラクターが3Dアバターとして画面に登場し、感情に応じて動くリアルタイム表現システム。**実装度85%（プロトタイプレベル）の高品質システム**。

#### 主要機能
- **モード切替**: 通常モードと3Dアバターモードの簡単切り替え
- **Three.js 3D表示**: WebGLによる高品質3D表示
- **感情アニメーション**: 6種類の基本感情表現（happy, sad, angry, surprised, love, thinking）
- **リアルタイム感情分析**: AIメッセージから感情を自動検出してアニメーション
- **感情連動色変化**: 感情に応じたアバターの色変更
- **フォールバック機能**: 3D表示失敗時の2D表示対応
- **設定保存**: モード設定の自動保存・復元

#### 感情アニメーション
- **😊 Happy**: ジャンプアニメーション + 黄色
- **😢 Sad**: 下向きポーズ + 青色  
- **😠 Angry**: 振動アニメーション + 赤色
- **😲 Surprised**: ジャンプアニメーション + オレンジ
- **😍 Love**: スピンアニメーション + ピンク
- **🤔 Thinking**: うなずきアニメーション + グレー

#### 技術仕様
- **3Dライブラリ**: Three.js (CDN経由)
- **アバターモデル**: プロトタイプ用カプセル型モデル
- **アニメーション**: リアルタイムキーフレームアニメーション
- **パフォーマンス**: GPU加速によるスムーズな表示
- **レスポンシブ対応**: モバイル・デスクトップ両対応

#### 将来の拡張予定
- **VRMモデル対応**: VTuber規格の3Dアバター
- **リップシンク**: 音声合成との口の動き同期
- **カスタムアバター**: ユーザー独自の3Dモデル読み込み
- **VRモード**: 仮想現実での没入体験

### 8. 🎬 シナリオセット管理システム ✅完全実装済み
キャラクターとシチュエーションを最適化したペアとして管理し、より没入感のある体験を提供するシステム。**テーマプロファイル連携により、各テーマに最適化されたシナリオを自動表示**。**実装度100%の完璧なシステム**。

#### 主要機能
- **最適化されたペア**: 特定のキャラクターとシチュエーションの組み合わせで成り立つ特別なシナリオ
- **選択モード切り替え**: 個別選択とシナリオセット選択の2つのモードを切り替え可能
- **テーマプロファイル連携**: 現在のテーマプロファイルに最適化されたシナリオを自動表示 ⭐NEW
- **プロファイル専用シナリオ**: 各テーマプロファイルに特化したシナリオセット ⭐NEW
- **共通シナリオ**: 全テーマプロファイルで共有されるシナリオセット ⭐NEW
- **フィルタリング機能**: テーマ（ロマンス、ミステリー、ファンタジー、癒し、可愛い）と難易度で絞り込み
- **検索機能**: キャラクター名、シチュエーション名、説明文、タグで検索
- **ランダム選択**: フィルター条件に合わせてランダム選択機能
- **カスタムセット**: ユーザー独自のシナリオセット作成・管理（今後実装予定）

#### テーマプロファイル専用シナリオ ⭐NEW
**学園青春テーマ**
- **放課後の図書室での秘密の告白** - 優しい図書委員の先輩との青春ロマンス
- **学園祭の準備で深まる友情** - クラスメイトとの協力で生まれる特別な絆
- **部活動での新しい挑戦** - 頼れる部長との成長ストーリー

**ファンタジー冒険テーマ**
- **古代遺跡の謎を解く冒険** - 考古学者リラと挑む古代の謎
- **竜との対話と友情** - 知恵深い古代竜オーロラとの意外な友情
- **魔法学院での修行と成長** - セージ教授のもとで学ぶ魔法の世界

**アニメ・ゲームテーマ**
- **アニメカフェでの偶然の出会い** - 同じ趣味を持つ仲間との特別な時間
- **ゲーム大会での熱い戦い** - ライバルたちとの白熱した競技
- **コスプレイベントでの友情** - 創造性豊かなコスプレイヤーとの交流

**ミステリー推理テーマ**
- **図書館に隠された暗号の謎** - サイファー教授との知的な謎解き
- **新人刑事との事件捜査** - ベテラン刑事との本格的な捜査
- **雨の夜の洋館殺人事件** - 執事セバスチャンとの古典的ミステリー

**デフォルトテーマ**
- **カフェでのリラックス会話** - 親しみやすいスタッフとの日常会話
- **悩み相談とサポート** - 心優しいカウンセラーとの対話
- **趣味について語り合う** - 多趣味な友人との楽しい交流

#### デフォルトシナリオセット（全テーマ共通）
1. **学園の幼馴染・美咲との屋上告白** - ツンデレ幼馴染とのロマンチックな告白シーン
2. **謎めいた探偵・レイとの密室殺人事件** - 冷静な美人探偵と挑む本格ミステリー
3. **優しい看護師・あかりとの深夜病院** - 心優しい看護師との癒しのひととき
4. **魔法使いエルフィーとの異世界冒険** - 元気な魔法使いエルフとの壮大なファンタジー
5. **メイド喫茶の看板娘・ももかとの特別な時間** - 可愛いメイドとの楽しい時間

#### UI要素
- **タブ切り替え**: 個別選択とシナリオセット選択のモード切り替え
- **シナリオカード**: 美しいカードデザインでの選択肢表示
- **プロファイル専用バッジ**: 📁 プロファイル専用シナリオの識別 ⭐NEW
- **共通バッジ**: 🌍 全テーマで共有されるシナリオの識別 ⭐NEW
- **フィルター**: ドロップダウンメニューでの絞り込み
- **検索バー**: リアルタイム検索機能
- **選択状態表示**: 現在の選択状態を明確に表示

### 9. 💕 好感度管理システム ⭐NEW
キャラクターとの関係性をリアルタイムで数値化・可視化する革新的なシステム。

#### 好感度レベル定義
- **0-10**: 大嫌い 💔 - 完全に嫌われている状態
- **20-30**: やや嫌い 😕 - 距離を置かれている
- **40-50**: 普通・中立 😊 - 特に印象なし〜普通の関係
- **60-70**: やや好き・好き 😄😍 - 好印象〜明らかに好かれている
- **80-90**: とても好き・大好き 🥰💕 - かなり親密〜深い愛情
- **100**: 愛している 💖 - 完全に愛されている状態

#### 主要機能
- **自動分析**: 会話内容から感情を分析して好感度を自動調整
- **手動調整**: スライダーとボタンで手動微調整可能
- **視覚的表示**: カラフルなゲージ、絵文字、アニメーション効果
- **履歴保存**: 好感度データも会話履歴と一緒に保存・復元
- **統計表示**: 平均好感度、好感度記録済み履歴数などの統計
- **リセット機能**: ワンクリックで中立（50）にリセット

#### 自動分析機能
- **ポジティブキーワード検出**: 「好き」「愛」「嬉しい」「感謝」など (+3ポイント)
- **ネガティブキーワード検出**: 「嫌い」「邪魔」「うざい」「怒」など (-5ポイント)
- **質問・関心表現**: 「？」「!」による感情表現 (+0.5ポイント)
- **会話の長さ**: 熱心な会話（100文字以上）への評価 (+1ポイント)
- **文脈分析**: 質問への応答、共感表現などの文脈考慮

#### UI要素
- **好感度ヘッダー**: 絵文字、レベル名、数値の表示
- **プログレスゲージ**: グラデーション付きアニメーションバー
- **コントロール**: スライダー、±5ボタン、リセットボタン
- **統計パネル**: 履歴管理画面での詳細統計表示

### 10. チャット機能（Ollama/vLLM最適化）
- **ストリーミング対応**: リアルタイムでのAI応答表示
- **音声認識**: Web Speech APIによる音声入力
- **メッセージ履歴**: 会話の完全な記録
- **タイピングインジケーター**: AI思考中の視覚的フィードバック
- **プロンプト最適化**: Ollama/vLLM向けに調整されたシステムプロンプト
- **応答形式統一**: 発言・動作・心の声の一貫したフォーマット
- **好感度連携**: 会話内容が自動的に好感度に反映 ⭐NEW

### 11. 履歴管理システム
- **会話保存**: 名前付きでの会話履歴保存
- **履歴復元**: 過去の会話の完全復元
- **自動保存**: 緊急時の自動バックアップ
- **インポート/エクスポート**: JSON形式での履歴管理
- **統計表示**: 会話数、メッセージ数、好感度統計 ⭐NEW
- **好感度データ保持**: 履歴復元時に好感度レベルも完全復元 ⭐NEW

### 12. RunPod GPU API管理
- **マルチプロバイダー対応**: Ollama, vLLM の自動切り替え
- **自動検出**: RunPod環境の自動認識
- **接続テスト**: API接続状態のリアルタイム監視
- **パフォーマンス統計**: 応答時間、エラー率の監視
- **エラーハンドリング**: 詳細なエラーメッセージと復旧支援

---

## 🎨 UI/UX設計

### デザインコンセプト
- **モダンでエレガント**: グラデーション、グラスモーフィズム効果
- **ダークテーマ**: 目に優しい暗色ベース
- **アニメーション豊富**: スムーズな画面遷移とフィードバック
- **レスポンシブ**: モバイルからデスクトップまで対応
- **心の声表現**: 専用スタイリングによる内面心理の視覚化
- **好感度可視化**: カラフルなゲージとアニメーションによる関係性表現 ⭐NEW
- **3Dアバター表示**: Three.jsによる高品質3D表示とリアルタイム感情表現 ⭐NEW
- **直感的フロー**: 6ステップウィザードによるスムーズな操作体験 ⭐NEW

### 📝 新しい6ステップUIフロー ⭐NEW

#### 🌟 概要
**選択後自動進行型**の直感的なウィザードシステム。従来の「選択→次へボタン→進行」から「選択→自動進行」へと大幅に改善し、**2度手間を解消**しました。

#### 🎯 ステップ構成
1. **ステップ1: プロファイル選択** 
   - テーマプロファイルをカード形式で選択
   - 選択後300ms遅延で自動的にステップ2に進行
   
2. **ステップ2: チャット種類選択**
   - シングルチャット・グループチャットから選択
   - 選択後300ms遅延で自動的にステップ3に進行
   
3. **ステップ3: シナリオ選択方法**
   - プリセットシナリオ・カスタム選択から選択方法を決定
   - 選択後300ms遅延で自動的にステップ4に進行
   
4. **ステップ4: 詳細設定**
   - 選択方法に応じてシナリオセット・キャラクター・シチュエーションを設定
   - 設定完了時に300ms遅延で自動的にステップ5に進行
   
5. **ステップ5: 確認とチャット開始**
   - 選択内容の最終確認
   - 心の声モード・3Dアバターモードの設定
   - 「チャット開始」ボタンでセッション開始

#### ✨ UX改善ポイント
- **2度手間解消**: 「選択→次へ」の操作が「選択→自動進行」に変更
- **スムーズな流れ**: 300msの適度な遅延によるスムーズな画面遷移
- **戻る機能維持**: 各ステップに「戻る」ボタンを配置し、誤選択時の修正が可能
- **進行状況可視化**: 現在のステップ番号を明確に表示
- **レスポンシブ対応**: 全デバイスで快適な操作感

#### 🔄 従来フローとの比較
**従来**: 選択 → 次へボタンクリック → 次のステップ（2アクション）
**改善後**: 選択 → 自動進行（1アクション）

**操作数50%削減**により、ユーザビリティが大幅に向上しました。

### 画面構成
1. **6ステップウィザード画面**: プロファイル〜チャット開始まで一貫したフロー ⭐NEW
2. **管理画面**: データ管理・設定画面（心の声モード・好感度設定・プロンプト編集含む）
3. **チャット画面**: メイン対話画面（心の声モードボタン・好感度ゲージ・3Dアバター表示付き）
4. **AI生成画面**: 動的コンテンツ生成画面
5. **ユーザーキャラクター管理画面**: 3択選択肢用の設定画面
6. **テーマプロファイル管理画面**: テーマプロファイル作成・切り替え画面
7. **プロンプト編集画面**: システムプロンプトの編集・カスタマイズ画面
8. **グループチャット画面**: マルチキャラクター対話画面（専用UI付き）

### カラーパレット
- **プライマリー**: #4ecdc4（ターコイズ）
- **セカンダリー**: #667eea（パープル）
- **背景グラデーション**: #1e3c72 → #2a5298
- **アクセント**: #ff9ff3（ピンク）、#ffd93d（イエロー）
- **心の声専用**: #ffb3e6（ライトピンク）
- **好感度レベル別**: 💔#ff4757 → 😊#95a5a6 → 💖#e84393 ⭐NEW

---

## ⚙️ API設定

### RunPod接続設定
```javascript
// Ollama設定（推奨）
{
  name: '🦙 Ollama (RunPod)',
  port: 11434,
  endpoint: '/v1/chat/completions',
  temperature: 0.85,
  max_tokens: 4000
}

// vLLM設定
{
  name: '⚡ vLLM (RunPod)',
  port: 8000, 
  endpoint: '/v1/chat/completions',
  temperature: 0.8,
  max_tokens: 4000
}
```

### プロンプト最適化
- **統合プロンプト管理**: 全プロンプトの一元管理と変数置換システム ⭐NEW
- **システムプロンプト**: ロールプレイ専用に調整
- **制約事項**: ユーザー代弁防止、キャラクター一貫性維持
- **コンテキスト管理**: 会話履歴の効率的な圧縮
- **心の声モード**: 内面心理表現用の専用プロンプト
- **好感度考慮**: キャラクターの感情レベルに応じた応答調整 ⭐
- **カテゴリ別整理**: チャット、選択肢、好感度、システム用に分類 ⭐NEW

---

## 💾 データ形式

### キャラクターデータ
```json
{
  "id": "unique_id",
  "name": "キャラクター名",
  "description": "簡単な説明",
  "prompt": "詳細なロールプレイ設定",
  "createdAt": "2024-01-01T00:00:00.000Z"
}
```

### ユーザーキャラクターデータ（テーマプロファイル対応版） ⭐NEW
```json
{
  "id": "user_char_id",
  "name": "ユーザーキャラクター名", 
  "description": "性格の簡単な説明",
  "prompt": "選択肢生成用の詳細設定",
  "profileId": "profile_id",
  "tags": ["積極的", "クール", "面白い"],
  "preferences": {
    "responseStyle": "casual",
    "emotionalLevel": "medium",
    "humorType": "witty"
  }
}
```

### テーマプロファイルデータ ⭐NEW
```json
{
  "id": "profile_id",
  "name": "学園青春テーマ",
  "description": "学校生活を舞台にした青春ストーリー",
  "settings": {
    "defaultCharacter": "user_char_id",
    "preferredResponseLength": "medium",
    "favoriteGenres": ["青春", "学園", "友情"],
    "avoidTopics": ["大人の恋愛", "社会人の話"]
  },
  "createdAt": "2024-01-01T00:00:00.000Z",
  "lastUsed": "2024-01-01T00:00:00.000Z"
}
```

### 会話履歴データ（好感度対応版） ⭐NEW
```json
{
  "id": "history_id",
  "name": "会話名",
  "character": {...},
  "situation": {...},
  "innerVoiceMode": true,
  "affectionLevel": 75,
  "affectionHistory": [
    {
      "timestamp": "2024-01-01T00:00:00.000Z",
      "oldLevel": 50,
      "newLevel": 75,
      "change": 25,
      "reason": "ユーザー発言: ポジティブな表現（好き）"
    }
  ],
  "messages": [
    {
      "role": "user|assistant",
      "content": "メッセージ内容",
      "timestamp": "2024-01-01T00:00:00.000Z"
    }
  ]
}
```

### 好感度設定データ ⭐NEW
```json
{
  "roleplay_affection_CHARACTER_ID": {
    "currentLevel": 75,
    "history": [...],
    "characterId": "character_id",
    "lastUpdated": "2024-01-01T00:00:00.000Z"
  }
}
```

### その他設定（テーマプロファイル対応版） ⭐NEW
```json
{
  "roleplay_inner_voice_mode": "true|false",
  "roleplay_api_provider": "ollama_runpod",
  "roleplay_user_characters": [...],
  "roleplay_user_profiles": [...],
  "roleplay_active_profile": "profile_id",
  "roleplay_chat_histories": [...],
  "roleplay_prompt_customizations": {
    "category": {
      "promptId": "customized_prompt_content"
    }
  }
}
```

---

## 📋 開発ノート

### 最近の修正履歴 ⭐NEW

#### 2024年最新: グループチャット機能の安定化修正
**問題解決**: 「学園の放課後パーティー」シナリオでの推奨キャラクター検索エラー

**修正内容**:
1. **キャラクターデータ読み込み修正**:
   - `loadDefaultCharacters()`でのwindow.characters同期問題を解決
   - characters変数更新時にwindow.charactersも同時更新するよう修正

2. **グループチャット開始時の非同期処理強化**:
   - `ensureCharactersLoaded()`関数を追加してデータ読み込み完了を待機
   - 最大5回、500ms間隔でのリトライ機能を実装

3. **キャラクター取得ロジックの改善**:
   - 直接JSONファイルからの再取得機能を追加
   - 複数のフォールバック手段による確実なデータ取得

4. **グループシナリオサンプルデータ追加**:
   - **美咲**: 学園のムードメーカー（group_char_001）
   - **澪**: 知的で文学好きな少女（group_char_002）
   - **ひまり**: 天真爛漫で愛らしい少女（group_char_003）
   - **放課後の教室（夕日）**: 学園祭準備後のパーティーシナリオ（group_sit_1）

**技術改善**:
- 非同期データ読み込みの安定性向上
- プリセットシナリオでの推奨キャラクター検索の確実性向上
- グループチャット開始時のエラーハンドリング強化

### ファイル名について
現在の実装では、テーマプロファイル機能のファイル名に一部`user-`プレフィックスが残っています：
- `user-profiles.json` → 将来的に`theme-profiles.json`に変更予定
- `user-profile-manager.js` → 将来的に`theme-profile-manager.js`に変更予定
- `user-profile-ui.js` → 将来的に`theme-profile-ui.js`に変更予定

これは既存コードとの互換性を保つための措置です。将来のバージョンで段階的にリネームを行う予定です。

---

## 🔧 開発・運用

### セットアップ手順
1. **RunPod GPU環境準備**
   ```bash
   # Ollama起動
   ollama serve
   ollama run qwen2.5:7b-instruct
   
   # または vLLM起動
   python -m vllm.entrypoints.api_server
   ```

2. **ローカルサーバー起動**
   ```bash
   npm install
   npm start
   # http://localhost:3000 でアクセス
   ```

### パフォーマンス最適化
- **GPU加速**: CSS transform の活用
- **メモリ管理**: イベントリスナーの適切な削除
- **DOM最適化**: DocumentFragment による一括更新
- **ストリーミング**: チャンク単位でのレスポンス処理
- **心の声処理**: 専用CSS最適化による高速レンダリング
- **好感度計算**: 効率的なキーワード分析と非同期処理 ⭐NEW

### デバッグ機能 ✅豊富な実装済み機能
- **詳細ログ**: 各モジュールの動作状況
- **統計情報**: API応答時間、エラー率
- **デバッグコマンド**: ブラウザコンソールから実行可能
- **心の声モードテスト**: `window.testInnerVoiceMode()` ✅
- **好感度システムテスト**: `window.debugAffectionSystem()` ✅
- **プロンプト管理テスト**: `window.promptManager.debugPrompts()` ✅
- **グループダイナミクスデバッグ**: `window.debugGroupDynamics()` ✅実装済み
- **複数好感度デバッグ**: `window.debugMultiAffection()` ✅実装済み
- **グループチャットデバッグ**: `window.debugGroupChat()` ✅実装済み
- **グループUIデバッグ**: `window.debugGroupUI()` ✅実装済み
- **キャラクター状態デバッグ**: `window.debugCharacterStatus()` ✅実装済み
- **シナリオセットデバッグ**: `window.scenarioSetManager.debug()` ✅実装済み
- **統合デバッグ**: `window.debugAll()` ✅包括的システムデバッグ

---

## 🚀 特徴・強み

1. **RunPod最適化**: GPU環境での高速AI推論 ✅
2. **🎭 グループチャット機能**: 2-4人マルチキャラクター同時会話システム ✅完全実装
3. **🎯 統合プロンプト管理**: 保守性・拡張性の大幅向上、GUI編集対応 ✅100%実装
4. **🎪 テーマプロファイル**: テーマ別設定管理による極限のカスタマイズ ✅完全実装
5. **🎬 シナリオセット管理**: 最適化ペア管理とプロファイル連携 ✅完全実装
6. **📊 キャラクター状態管理**: 統合ダッシュボードと詳細分析 ✅95%実装
7. **🎭 キャラクター状態変更**: 8種類感情制御システム ✅95%実装
8. **3択選択肢システム**: ユーザー体験の大幅向上 ✅
9. **💭 心の声モード**: キャラクターの内面表現による没入感向上 ✅
10. **💕 好感度システム**: リアルタイム関係性可視化による新次元の体験 ✅
11. **🎭 3Dアバターシステム**: Three.js による感情表現豊かな3D表示 ✅85%実装
12. **🛠️ プロンプトエディター**: GUI でのリアルタイム編集・プレビュー ✅完全実装
13. **🔧 豊富なデバッグ機能**: 13種類の包括的デバッグシステム ✅完全実装
14. **モジュラー設計**: 各機能の独立性と拡張性 ✅
15. **リアルタイム対話**: ストリーミングによる自然な会話 ✅
16. **データ永続化**: ローカルストレージによる設定保持 ✅
17. **レスポンシブ対応**: 全デバイスでの快適な操作 ✅
18. **多層的表現**: 発言・動作・心の声・好感度・3Dアバターによる豊かなキャラクター表現 ✅
19. **完全テーマ化**: テーマプロファイル別の完全カスタマイズ環境 ✅完全実装

---

## 🔮 今後の拡張可能性

- **プロンプトエディター**: GUI でのプロンプト編集・テスト機能 ⭐NEW
- **VRMアバター対応**: VTuber規格の高品質3Dアバター ⭐NEW
- **リップシンク**: 3Dアバターの音声同期機能 ⭐NEW
- **マルチモーダル対応**: 画像生成・理解機能
- **音声合成**: キャラクター音声の生成（心の声も含む）
- **グループチャット**: 複数キャラクターとの同時対話
- **プラグインシステム**: 機能の動的追加
- **クラウド連携**: オンラインデータ同期
- **カスタムテーマ**: ユーザー定義デザイン
- **心の声解析**: AIによる感情分析・キャラクター成長システム
- **好感度連動システム**: 好感度に応じたイベント・特別な反応 ⭐
- **関係性グラフ**: 複数キャラクターとの好感度関係の可視化 ⭐
- **プロンプトテンプレート**: 用途別プロンプトテンプレート集 ⭐NEW
- **VRモード**: 仮想現実での没入体験・3Dアバター連携 ⭐NEW

---

## 📝 使用方法

### 基本操作
1. **初期設定**: RunPod APIエンドポイントの設定
2. **テーマ設定**: テーマプロファイルの作成・選択 ⭐NEW
3. **キャラクター選択**: 好みのキャラクターを選択またはAI生成
4. **シチュエーション設定**: 対話環境の選択
5. **ユーザーキャラクター設定**: 自分の性格を定義（3択選択肢機能用）
6. **プロンプトカスタマイズ**: 必要に応じてシステムプロンプトを編集 ⭐NEW
7. **3Dアバターモード**: 右上のボタンで3Dアバター表示を切り替え ⭐NEW
8. **チャット開始**: AIとのロールプレイ対話を楽しむ
9. **履歴管理**: 気に入った会話の保存・復元

### 心の声モードの使用
1. **チャット画面でモード切り替え**: 「💭 心の声モード: OFF」ボタンをクリック
2. **モード確認**: ボタンが「💭 心の声モード: ON」に変わることを確認
3. **対話開始**: AIの応答に心の声が含まれるようになる
4. **選択肢活用**: 3択選択肢にも心の声が反映される
5. **設定保存**: ブラウザを再起動してもモード設定が保持される

### 好感度システムの使用 ⭐NEW
1. **自動分析の確認**: チャット画面の好感度ゲージで現在レベルを確認
2. **手動調整**: スライダーまたは±5ボタンで手動調整可能
3. **設定切り替え**: 「会話内容から自動分析」チェックボックスでON/OFF
4. **統計確認**: 履歴管理画面で好感度統計を確認
5. **履歴連携**: 保存した会話と一緒に好感度も保存・復元される

### 3Dアバターモードの使用 ⭐NEW
1. **モード切り替え**: 右上の「🎭 3Dアバター: OFF」ボタンをクリック
2. **アバター表示**: 右側に3Dアバターが表示される
3. **感情表現**: AIの応答に応じてアバターが自動的に感情を表現
4. **設定保存**: モード設定はブラウザに自動保存される
5. **パフォーマンス**: 3D表示が重い場合はOFFに切り替え可能

### 好感度の応答例 ⭐NEW
**低好感度（20）の場合:**
```
「...はぁ。また何か用ですか？」（明らかに迷惑そうな表情）
心の声：「この人、本当に苦手...早く終わらないかな」
```

**高好感度（90）の場合:**
```
「あ、あなた！会えて嬉しいです♪」（目を輝かせて駆け寄る）
心の声：「この人と一緒にいると、なんだか心が暖かくなる...」
```

### プロンプト管理の使用 ⭐NEW
1. **GUI編集**: 管理画面のプロンプト編集タブでリアルタイム編集
2. **プロンプト確認**: コンソールで `window.promptManager.debugPrompts()` を実行
3. **カスタムプロンプト**: PromptManager で独自プロンプトを設定可能
4. **変数確認**: `{{変数名}}` の置換結果をデバッグ機能で確認
5. **プレビュー機能**: 編集中のプロンプトをリアルタイムでプレビュー表示
6. **自動バックアップ**: 変更前のプロンプトを自動的にバックアップ
7. **エラー対応**: プロンプト読み込み失敗時の自動フォールバック
8. **メンテナンス**: `js/prompts/` 内のファイルを直接編集またはGUI編集

### テーマプロファイル管理の使用 ⭐NEW
1. **テーマプロファイル作成**: 管理画面でテーマプロファイルを新規作成
2. **設定保存**: テーマプロファイルごとに好みの応答スタイル・性格設定を保存
3. **テーマ切り替え**: チャット画面でワンクリックテーマプロファイル変更
4. **デフォルト設定**: よく使うテーマプロファイルをデフォルトに設定
5. **インポート/エクスポート**: テーマプロファイルデータのバックアップ・共有
6. **統計確認**: テーマプロファイル別の使用頻度・会話統計を表示

### デバッグ・テスト機能
- **心の声モードテスト**: コンソールで `window.testInnerVoiceMode()` を実行
- **好感度システムデバッグ**: コンソールで `window.debugAffectionSystem()` を実行
- **プロンプト管理デバッグ**: コンソールで `window.promptManager.debugPrompts()` を実行 ⭐NEW
- **統合デバッグ**: コンソールで `window.debugAll()` を実行
- **デバッグ情報表示**: コンソールで各種デバッグ関数を実行

---

このアプリケーションは、最新のAI技術とユーザビリティを組み合わせた、次世代のロールプレイチャット体験を提供します。特に**「グループチャット機能」「統合プロンプト管理システム」「心の声モード」「好感度システム」**により、マルチキャラクター会話、保守性・拡張性、深いキャラクター表現・関係性の可視化を実現し、真にインタラクティブな体験を創出しています。

## 🚀 グループチャット使用方法

### 基本的な使い方
1. **グループチャット開始**: メイン画面で「🎭 グループチャット」ボタンをクリック
2. **参加者選択**: 2-4人のキャラクターをチェックボックスで選択
3. **シチュエーション選択**: グループに適したシチュエーションを選択
4. **設定調整**: 発話モード（AI制御/順番制/手動）と機能設定を選択
5. **チャット開始**: 「グループチャット開始」ボタンでセッション開始

### リアルタイム監視
- **右側パネル**: 参加者一覧、好感度ゲージ、発話状況をリアルタイム表示
- **統計パネル**: グループ雰囲気、発話バランス、メッセージ数、平均好感度
- **関係性パネル**: キャラクター間の関係性をネットワーク形式で可視化
- **制御パネル**: 発話モード変更、設定調整、セッション保存・終了

### 高度な機能
- **発話者ハイライト**: 現在話しているキャラクターを視覚的に強調
- **好感度リアルタイム更新**: 会話内容に応じて自動的に好感度が変化
- **関係性進展**: キャラクター同士の関係も動的に発展
- **グループバランス監視**: 全員が適度に参加できているかAIが分析

---

## 📊 実装状況サマリー（2024年最新）

### ✅ **完全実装済み機能（100%）**
- **統合プロンプト管理システム** - GUI編集、変数置換、6カテゴリ対応
- **テーマプロファイル機能** - プロファイル別データ分離、5+プロファイル実装
- **シナリオセット管理システム** - プロファイル連携、統合表示、バッジシステム
- **プロンプトエディター** - リアルタイム編集・プレビュー機能
- **6ステップ直感的UIウィザード** - 選択後自動進行、2度手間解消

### 🔥 **高レベル実装済み機能（95%+）**
- **グループチャット機能** - マスターAI制御、8種類専用シナリオ、専用UI
- **キャラクター状態管理システム** - 統合ダッシュボード、詳細分析機能
- **キャラクター状態変更システム** - 8種類感情制御、好感度連動
- **豊富なデバッグ機能** - 13種類の包括的デバッグシステム

### ⚡ **実装済み機能（85%+）**
- **3Dアバターシステム** - Three.js、6種類感情アニメーション（プロトタイプレベル）

### 📈 **プロジェクト全体実装度: 98%以上** ⭐NEW

このアプリケーションは、最新のAI技術とユーザビリティを組み合わせた、**次世代のロールプレイチャット体験**を提供します。特に**「グループチャット機能」「統合プロンプト管理システム」「テーマプロファイル機能」「6ステップUIウィザード」**により、マルチキャラクター会話、保守性・拡張性、完全カスタマイズ環境、直感的操作を実現し、**真にインタラクティブな体験**を創出しています。

---

## 🔄 更新履歴

### v3.1.0 (2024年12月) - エラーハンドリング・最適化版 ⭐NEW
#### 🛠️ **コード品質・安定性の大幅改善**
- **完全エラー修正**: `TimerManager is not defined`エラーなどの初期化エラーを根本解決
- **アラートダイアログ全廃**: 40+箇所の`alert()`呼び出しを`console.log()`+`showNotification()`に変換
- **デバッグダイアログ無効化**: 不要な初期化問題検出ダイアログを削除、コンソール警告に変更
- **未定義クラス参照修正**: `DOMOptimizer`、`PerformanceMonitor`、`TimerManager`の安全な初期化処理
- **重複コード削除**: 13箇所の「module loading complete」ログなどの冗長コードを整理
- **不要ファイル削除**: テスト・デバッグファイル9個を削除してプロジェクト構造を最適化

#### 🎯 **ユーザー体験の向上**
- **エラー表示改善**: 侵入的なポップアップを廃止、エレガントな通知システムに統一
- **デバッグ体験向上**: エラー内容のコピー&ペーストが容易に（コンソール出力）
- **初期化安定性向上**: アプリケーション起動時のエラー発生を大幅削減
- **レスポンシブ性向上**: 不要な処理削除により、全体的なパフォーマンスが向上

#### 📊 **技術仕様の改善**
- **エラーハンドリング**: 包括的なエラーログ出力とスタックトレース表示
- **フォールバック機能**: 未定義関数・オブジェクトに対する安全な代替処理
- **コンソール統合**: 全てのデバッグ情報をブラウザコンソールに統一
- **実装度向上**: 95% → **98%** に向上（安定性・保守性の大幅改善）

### v3.0.0 (2024年11月) - グループチャット・統合プロンプト版
- グループチャット機能の完全実装
- 統合プロンプト管理システム
- テーマプロファイル機能
- 6ステップUIウィザード