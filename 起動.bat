@echo off
chcp 65001 >nul
setlocal enabledelayedexpansion

REM ğŸ¥ ä¿å¥æŒ‡å°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - Windowsç”¨èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
REM ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã ã‘ã§ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¾ã™

REM ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /d "%~dp0"

echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸ¥ ä¿å¥æŒ‡å°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - èµ·å‹•ä¸­...
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

REM Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
where node >nul 2>&1
if %errorlevel% neq 0 (
    echo âŒ ã‚¨ãƒ©ãƒ¼: Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“
    echo.
    echo ä»¥ä¸‹ã®URLã‹ã‚‰Node.jsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„:
    echo https://nodejs.org/
    echo.
    echo ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å†åº¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
    echo.
    pause
    exit /b 1
)

REM Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤º
for /f "delims=" %%i in ('node -v') do set NODE_VERSION=%%i
echo âœ… Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³: %NODE_VERSION%
echo.

REM node_modulesãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
if not exist "node_modules\" (
    echo ğŸ“¦ åˆå›èµ·å‹•: å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã¾ã™...
    echo    ^(æ•°åˆ†ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™^)
    echo.
    call npm install
    if errorlevel 1 (
        echo.
        echo âŒ ã‚¨ãƒ©ãƒ¼: ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
        echo.
        pause
        exit /b 1
    )
    echo.
    echo âœ… ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†!
    echo.
)

REM é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
echo ğŸš€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo âœ… èµ·å‹•å®Œäº†!
echo.
echo ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã®URLã‚’é–‹ã„ã¦ãã ã•ã„:
echo ğŸ‘‰ http://localhost:3000
echo.
echo ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•ã§é–‹ã‹ãªã„å ´åˆã¯ã€
echo ä¸Šè¨˜ã®URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚
echo.
echo çµ‚äº†ã™ã‚‹å ´åˆã¯ã€ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹ã‹ã€
echo Ctrl+C ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

REM 3ç§’å¾…ã£ã¦ã‹ã‚‰ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ã
timeout /t 3 /nobreak >nul
start http://localhost:3000

REM é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
call npm run dev
